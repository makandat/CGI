<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Sinatra filer 2.0 (Nadeko)</title>
<link rel="stylesheet" href="greentea.css" />
</head>

<body>
<h1 style="text-align:center;border-bottom-style:dotted;border-bottom-color:green;border-bottom-width:1px;padding:8px;text-shadow:1px 1px 2px #224222;">Sinatra filer 2.0 (Nadeko) コマンド詳細</h1>
<p><a href="javascript:window.close();">[close]</a> <a href="help.html">[もどる]</a> <a href="help_script.html">[スクリプト詳細]</a>  <a href="help_method.html">[メソッド詳細]</a>
 <a href="help_API.html">[APIの詳細]</a>
</p>
<div class="doc">
<h2>シェル・コマンドの使用上の注意</h2>
<ul>
<li class="m">キーボード入力が必要なコマンド(例えばviやsu)は、キー入力ができないため実行できません。</li>
<li class="m">シェルのコマンドは、Sinatra filerを起動したユーザの権限で実行されます。したがって、管理者権限が必要なコマンドは実行できません。</li>
<li class="m">現在表示されているディレクトリとカレントディレクトリは一致しているとは限りません。一致していないときはファイルの指定などはフルパスで入力する必要があります。一致させるには、"pwd:"をクリックするか、"\."コマンドを実行します。</li>
<li class="m">何も表示しないコマンドは、結果として"Done."と表示されます。実行が失敗したときは、"executing .."と表示されたままになります。</li>
<li class="m">実行に失敗して"executing .."のままになってしまったとき、そのプロセスはサスペンド状態になるので、killコマンドで終了させてください。</li>
<li class="m">リダイレクトやパイプも使えます。<br />(例) ifconfig | grep inet</li>
<li class="m">ファイル名などの代わりに表示されているファイル一覧の番号を使用できます。このとき、表示されている場所とコマンドを実行する場所(カレントディレクトリ)が一致している必要があります。<br />
ファイル番号は#を付けて指定します。番号だけだと、そういうファイルやディレクトリとみなされます。<br />
(例) cat #15</li>
</ul>
<p>&nbsp;</p>


<h2>コマンドやパス名を入力を楽にする方法</h2>
<ul>
<li class="m">ブックマーク(\abコマンド)とキャッシュ(\番号 コマンド)にパスを登録し、クリップボード経由でcommandボックスに貼り付けると長いパス名を簡単に入力するができます。</li>
<li class="m">タブをもうひとつ開いて、パス名をコピー＆ペーストすると、キーボードから長いパス名を入力する必要がなくなります。このとき、フルパス名を表示する"\dir"コマンドを使うと、フルパスでファイル一覧を表示できます。</li>
<li class="m">"\h"コマンドでコマンド履歴を利用すると、長いコマンド入力をしなくてすみます。</li>
<li class="m">"!番号"コマンドを使うと、ファイル一覧の番号を指定するだけで、そのファイルをコマンドとして実行できます。コマンドによっては、"\."コマンドを実行してからでないと正しく動作しないものがあります。また、JavaのクラスやPerlのソースなどを指定するだけで実行することができます。</li>
</ul>
<p>&nbsp;</p>


<h2>ファイルやディレクトリの操作</h2>
<ul>
<li class="m">パス名入力を簡略化するために、"#番号"をパス名の代わりに使用できます。ただし、カレントディレクトリと表示ディレクトリを一致させておき、ディレクトリ内容を表示させておく必要があります。</li>
<li class="m">作業ディレクトリの移動は、cdコマンドを使用します。</li>
<li class="m">表示ディレクトリよく使う場所は"locations"セレクタで移動できます。\cdコマンドを使うと、表示ディレクトリを直接指定できます。</li>
<li class="m">"\."コマンドは、表示ディレクトリと作業ディレクトリを一致させます。</li>
<li class="m">ファイルやディレクトリの削除は、rmコマンドで行います。結果を表示するために-vスイッチを使うと良いです。<br />
rm -v #10<br />
最後にキャッシュに登録したファイルを削除するとき、\rmコマンドも使用できます。
</li>
<li class="m">ファイルのコピーには、cpコマンドが利用できますが、パス名入力を簡略化するため、\cpコマンドも利用できます。<br />
(使用例)
<blockquote>
\n　　コピー元のパス名をキャッシュへコピー<br />
\cd ...　　コピー先へ移動<br />
\cp　　コピー実行<br />
</blockquote>
</li>
<li class="m">ファイルの移動には、mvコマンドが利用できますが、パス名入力を簡略化するため、\mvコマンドも利用できます。使い方は\cpと同じです。</li>
</ul>
<p>&nbsp;</p>


<h2>ファイル内容の表示</h2>
<ul>
<li class="m">よく使うタイプのファイル内容は一覧表示でアイコンをクリックすると適切な方法で表示できます。例えば、JPEG画像なら画像として表示できます。</li>
<li class="m">拡張子のないファイルは、実行ファイルの場合とテキストファイルの場合がありますが、"README"のようなファイル内容を表示したい場合は、catコマンドを使用します。</li>
<li class="m">HTMLファイルは通常、レンダリングされた状態で表示されますが、テキストとして表示するときは、上の場合と同様にcatコマンドで表示できます。config.iniで設定を変更して常にテキストとして表示することもできます。<br />
(注意) HTMLファイルで画像などは仮想ディレクトリがわからないため、一般に正しく表示できません。
</li>
<li class="m">ファイル内容を標準以外の方法で表示したい場合は、<a href="help_method.html">「メソッド」</a>を作成します。</li>
<li class="m">バイナリーファイルかどうかを判断するときは、odコマンドでダンプ表示するとよい。<br />
(例) od -x ..</li>
</ul>
<p>&nbsp;</p>


<h2>ファイルのダウンロードやアップロード</h2>
<ul>
<li class="m">ZIPファイルなどを除いて直接、ファイルのダウンロードはできません。テキストファイルなどは、表示内容をテキストエディタにコピー＆ペーストしてローカルに保存できます。それ以外は、zipやgzipなどで圧縮ファイルを作成してからダウンロードします。</li>
<li class="m">ファイルのアップロードは、"file upload"メニューで行うことができます。</li>
</ul>
<p>&nbsp;</p>


<h2>ファイル管理データベースの操作</h2>
　管理データベースを使うと、ファイルやディレクトリに詳しい情報や様々な操作（メソッド）を追加できます。管理データベースを利用するためには、config.iniに"sqlite3=データベースのパス名"という行を追加しなければなりません。<br />
　データベースのファイル名は任意ですが、次のようなSQLでinfoというテーブルを作成しておく必要があります。<br />
<pre class="code">
create table info (
  n integer not null primary key autoincrement,
  path text not null,
  info text not null,
  method text,
  icon text,
  dir integer not null default 0,
  bin integer not null default 0,
  `group` text,
  tstamp text
);

</pre>
<br />
<ul>
<li class="m">データベースに登録するには、ファイルの番号をパラメータとして\iiコマンドを使用します。このコマンドを実行すると、</li>
<li class="m">登録済みの内容を削除するには、ファイルの番号をパラメータとして\idコマンドを使用します。</li>
<li class="m">登録済みの内容を更新するには、ファイルの番号をパラメータとして\iuコマンドを使用します。</li>
<li class="m">メソッドを実行するには、ファイルの番号をパラメータとして\ixコマンドを使用します。<br />
（参考）スクリプトを実行するには\izコマンドを使用します。</li>
<li class="m">データベースに登録されているかどうかを確認するには、\ivコマンドを使用します。あるいは"list all"メニューも使用できます。</li>
<li  class="m">登録情報の問い合わせは\isコマンドで行います。このコマンドを実行すると問い合わせフォームが表示されます。</li>
<li class="m">登録されたメソッドだけを表示するには、\imコマンドを表示します。</li>
<li class="m">ファイル情報だけを表示するには、\ifコマンドを表示します。</li>
<li class="m">\igコマンドを使うと、infoテーブルのiconフィールドに画像データを埋め込むことができます。この画像を表示するには、\ipコマンドを使用します。</li>
</ul>
<p>&nbsp;</p>


<h2>スクリプトの実行</h2>
　スクリプトの実行は、通常、"script"メニューで行いますが、\izコマンドを使用することもできます。ただし、フォームを必要とするスクリプトなどは実行できないので注意してください。<br />
　\izコマンドで実行するためには、パラメータの受け取りなどでスクリプト側で特別な処理が必要な時があります。<br />
　パラメータを渡す必要がある場合は、スクリプトの番号の後に;を入れて、その後にパラメータのコードを追加します。<br />
(例)
<blockquote>
 \iz 15;params={:a=>5}
</blockquote>
<p>&nbsp;</p>


<!-- End of Content -->
<p>&nbsp;</p>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
</body>
</html>
